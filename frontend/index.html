<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ” Digital Signature System</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <!-- ===== Sidebar Navigation ===== -->
    <aside class="sidebar">
      <h2>ğŸ” Menu</h2>
      <button class="nav-btn" id="nav-sign">âœï¸ Sign File</button>
      <button class="nav-btn" id="nav-verify">ğŸ§¾ Verify File</button>
      <button class="nav-btn" id="nav-visual">ğŸ¥ Visualization</button>
    </aside>

    <!-- ===== Main Content ===== -->
    <main class="main-content">
      <h1 class="title">Digital Signature System</h1>
      <p class="subtitle">
        Demonstrating RSA-based Digital Signatures with Hashing (SHA-256), Timestamp & Signer Info
      </p>

      <!-- Generate Keys Section -->
      <div class="section" id="key-section">
        <h2>1ï¸âƒ£ Generate RSA Keys</h2>
        <p>Click below to generate public and private keys used for signing and verification.</p>
        <button id="generateKeysBtn">Generate Keys</button>
        <pre id="keysOutput" class="output"></pre>
      </div>

      <!-- Sign File Section -->
      <div class="section" id="sign-section">
        <h2>2ï¸âƒ£ Sign a File</h2>
        <p>Enter your name and upload a file to generate a digital signature embedded inside the file.</p>

        <label for="usernameInput"><b>Signer Name:</b></label><br>
        <input type="text" id="usernameInput" placeholder="Your name" class="input-field" /><br><br>

        <label for="signFileInput"><b>Select File to Sign:</b></label><br>
        <input type="file" id="signFileInput" /><br><br>

        <button id="signBtn">Sign File</button>
        <div id="signOutput" class="output"></div>
      </div>

      <!-- Verify File Section -->
      <div class="section hidden" id="verify-section">
        <h2>3ï¸âƒ£ Verify a Signed File</h2>
        <p>Upload the signed file (which contains the embedded signature metadata) to check authenticity.</p>

        <label for="verifyFileInput"><b>Select Signed File:</b></label><br>
        <input type="file" id="verifyFileInput" /><br><br>

        <button id="verifyBtn">Verify File</button>
        <div id="verifyOutput" class="output"></div>
      </div>

      <!-- ğŸ¥ Visualization Section -->
      <div class="section hidden" id="visual-section">
        <h2>ğŸ¥ Working Visualization</h2>
        <p>Click â€œStart Visualizationâ€ to see how the digital signature process works internally.</p>
        <button id="startVisualizationBtn">â–¶ï¸ Start Visualization</button>
        <div id="visualSteps" class="visual-box"></div>
      </div>

      <!-- Footer -->
      <footer>
        <p>Created by <b>Venugopal K P,Akhil S R,Adithyan Sanker,Jithin George,AChuyth Murali,Alex Paul</b> | Maths Project on Cryptography & Digital Signatures</p>
        <small>RSA â€¢ Modular Arithmetic â€¢ SHA-256 â€¢ Flask â€¢ Vercel</small>
      </footer>
    </main>
  </div>

  <script src="script.js"></script>

  <script>
    // ===== Section Toggle Logic =====
    const signSection = document.getElementById("sign-section");
    const verifySection = document.getElementById("verify-section");
    const visualSection = document.getElementById("visual-section");

    document.getElementById("nav-sign").addEventListener("click", () => {
      signSection.classList.remove("hidden");
      verifySection.classList.add("hidden");
      visualSection.classList.add("hidden");
    });

    document.getElementById("nav-verify").addEventListener("click", () => {
      verifySection.classList.remove("hidden");
      signSection.classList.add("hidden");
      visualSection.classList.add("hidden");
    });

    document.getElementById("nav-visual").addEventListener("click", () => {
      visualSection.classList.remove("hidden");
      signSection.classList.add("hidden");
      verifySection.classList.add("hidden");
    });

    // ğŸ¬ Visualization Steps Animation
    document.getElementById("startVisualizationBtn").addEventListener("click", async () => {
      const steps = [
        "1ï¸âƒ£ <b>Generate Keys</b>: The system creates a Public and Private RSA key pair.",
        "2ï¸âƒ£ <b>Hash File</b>: The file content is converted into a unique SHA-256 hash.",
        "3ï¸âƒ£ <b>Sign Hash</b>: The hash is encrypted using the Private Key to create a signature.",
        "4ï¸âƒ£ <b>Embed Metadata</b>: The signature, hash, timestamp, and public key are added to the file.",
        "5ï¸âƒ£ <b>Verify File</b>: The hash is recalculated and compared with the decrypted signature.",
        "âœ… <b>Result</b>: If both match, the file is authentic. Otherwise, it has been tampered with."
      ];

      const box = document.getElementById("visualSteps");
      box.innerHTML = "";
      for (let step of steps) {
        const p = document.createElement("p");
        p.innerHTML = step;
        box.appendChild(p);
        await new Promise(r => setTimeout(r, 1000));
      }
    });
  </script>
</body>
</html>
